document.querySelectorAll(".js").forEach(e=>e.style.display="initial");let audio=document.querySelector("audio")||new Audio,source,context,analyser,gainNode,dataArray,dataOld,bufferLength,blhalf,button=document.getElementById("trigger"),container=document.getElementById("logo"),barItem=3;function resetSong(e){e.paused?e.play():e.pause()}function play(e){if(audio.muted&&(audio.muted=!1),resetSong(audio),void 0===dataOld){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,context=new AudioContext}catch(e){return!1}source=context.createMediaElementSource(audio),analyser=context.createAnalyser(),gainNode=context.createGain(),analyser.minDecibels=-64,analyser.maxDecibels=-32,analyser.fftSize=512,dataArray=new Uint8Array(bufferLength=analyser.frequencyBinCount),blhalf=Math.floor(.5*bufferLength),source.connect(analyser),analyser.connect(gainNode),gainNode.connect(context.destination),draw()}gainNode.gain.value=+!e}window.requestAnimationFrame=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/30)},button.addEventListener("click",()=>play(0)),button.addEventListener("touchstart",()=>play(0));let WIDTH=window.innerWidth,HEIGHT=window.innerHeight;(canvas=document.getElementById("yaebal")).width=WIDTH,canvas.height=HEIGHT,canvasCtx=canvas.getContext("2d");let color={from:"#24c6fb",to:"#2CC932"};(barGradient=canvasCtx.createLinearGradient(0,0,0,HEIGHT)).addColorStop(0,color.from),barGradient.addColorStop(1,color.to);let drumVolume=0;function draw(){analyser.getByteFrequencyData(dataArray);let e=dataArray[barItem]-dataOld,a=dataArray[barItem]/255;drumVolume<a?drumVolume=a+e/255:drumVolume>0&&(drumVolume-=.005),container.style.opacity=drumVolume,drawCanvas(e,drumVolume),dataOld=dataArray[barItem],requestAnimationFrame(draw)}function drawCanvas(e,a){let t;canvasCtx.clearRect(0,0,WIDTH,HEIGHT);let n=Math.ceil(WIDTH/blhalf),r=0;for(let e=0;e<blhalf;e++)t=HEIGHT*dataArray[e]/255,canvasCtx.fillStyle=barGradient,canvasCtx.fillRect(r,HEIGHT-t,n,t),r+=n+1;canvasCtx.fillStyle="red",canvasCtx.fillRect((n+1)*barItem,HEIGHT*(1-a),n,5)}
//# sourceMappingURL=ansi.36ec8ef3.js.map
